{"file":"app-booking.entry.esm.js","mappings":";;AAAA,MAAM,aAAa,GAAG,srBAAsrB;;MCO/rB,UAAU;;;;sBACG,EAAE;sBACF,EAAE;wBACA,EAAE;+BAIO,IAAI;+BACJ,IAAI;4BACP,EAAE;yBACL,EAAE;uBACJ,EAAE;4BACG,EAAE;6BACD,EAAE;oCACK,EAAE;0BACZ,EAAE;;IAEhC,mBAAmB,CAAC,KAAa;QAC/B,MAAM,UAAU,GAAG,qBAAqB,CAAC;QACzC,OAAO,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;KAEnD;IACD,mBAAmB;QACjB,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,IAChC,OAAO,CAAC,OAAO,KAAK,IAAI,CAAC,eAAe;YACxC,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,YAAY;aACjC,CAAC,IAAI,CAAC,SAAS,IAAI,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,OAAO;iBACtE,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CACzE,CAAC;KACH;IAED,mBAAmB;QACjB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,eAAe,CAAC,CAAC;QACnE,IAAI,CAAC,KAAK;YAAE,OAAO,CAAC,CAAC;QACrB,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QACvD,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QACnD,IAAI,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;QACjE,MAAM,KAAK,GAAC,KAAK,GAAC,CAAC,CAAA;QACnB,IAAG,KAAK,IAAE,IAAI,IAAI,KAAK,IAAE,IAAI,EAAC;YAC1B,KAAK,GAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAC,GAAG,CAAA;SAC/B;aAAI;YACD,KAAK,GAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;SACzB;QACD,OAAO,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;KAEnC;IAGD,aAAa;;QACX,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAE/B,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;YACjD,IAAI,CAAC,UAAU,GAAG,oDAAoD,CAAC;YACvE,OAAO;SACR;QACD,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC7D,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAEzD,IAAI,SAAS,GAAG,CAAC,IAAI,OAAO,GAAG,CAAC,EAAE;YAClC,IAAI,CAAC,oBAAoB,GAAG,qDAAqD,CAAC;YAClF,OAAO;SACN;QAED,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE;YAC9B,MAAM,UAAU,GAAG;gBACjB,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE;gBACd,OAAO,EAAE,IAAI,CAAC,eAAe;gBAC7B,IAAI,EAAE,IAAI,CAAC,YAAY;gBACvB,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,YAAY,EAAE,IAAI,CAAC,YAAY;gBAC/B,aAAa,EAAE,IAAI,CAAC,aAAa;gBACjC,UAAU,EAAE,IAAI,CAAC,mBAAmB,EAAE;gBACtC,MAAM,EAAE,QAAQ;aACjB,CAAC;YAEF,KAAK,CAAC;;WAED,MAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,eAAe,CAAC,0CAAE,IAAI;UAC3D,IAAI,CAAC,YAAY;UACjB,IAAI,CAAC,SAAS,MAAM,IAAI,CAAC,OAAO;oBACtB,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC;YAEvC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAEjC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;SAChC;aAAM;YACL,IAAI,CAAC,oBAAoB,GAAG,kCAAkC,CAAC;SAChE;KACF;IAGD,sBAAsB;QACpB,OAAO,IAAI,CAAC,QAAQ;aACjB,MAAM,CAAC,OAAO,IACb,OAAO,CAAC,OAAO,KAAK,IAAI,CAAC,eAAe;YACxC,OAAO,CAAC,MAAM,KAAK,QAAQ;YAC3B,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,YAAY,CACnC;aACA,GAAG,CAAC,OAAO,KAAK;YACf,SAAS,EAAE,OAAO,CAAC,SAAS;YAC5B,OAAO,EAAE,OAAO,CAAC,OAAO;SACzB,CAAC,CAAC,CAAC;KACP;IAED,MAAM;QACJ,MAAM,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,IACjD,KAAK,CAAC,OAAO,KAAK,IAAI,CAAC,eAAe,IAAI,KAAK,CAAC,SAAS,CAC1D,CAAC;QACF,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjD,QACE,8DACE,4EAAqB,EAErB,+DAAQ,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAE,CAAC,CAAC,MAA4B,CAAC,KAAK,CAAC,IAC3F,+DAAQ,KAAK,EAAC,EAAE,yBAA4B,EAC3C,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,IAAI,cAAQ,KAAK,EAAE,KAAK,CAAC,EAAE,IAAG,KAAK,CAAC,IAAI,CAAU,CAAC,CAClE,EAER,IAAI,CAAC,eAAe,KACnB,+DAAQ,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAE,CAAC,CAAC,MAA4B,CAAC,KAAK,CAAC,IAC3F,+DAAQ,KAAK,EAAC,EAAE,yBAA4B,EAC3C,cAAc,CAAC,GAAG,CAAC,KAAK,IAAI,cAAQ,KAAK,EAAE,KAAK,CAAC,EAAE,IAAG,KAAK,CAAC,IAAI,CAAU,CAAC,CACrE,CACV,EAEA,IAAI,CAAC,eAAe,KACnB,8DACE,8DAAO,IAAI,EAAC,MAAM,EACd,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,YAAY,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,EAAE,GAAG,EAAE,KAAK,GAAG,EAEzF,8DAAO,IAAI,EAAC,MAAM,EACd,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,SAAS,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,GAAI,EAE3E,8DAAO,IAAI,EAAC,MAAM,EACd,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,OAAO,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,GAAI,EAEzE,8DAAO,IAAI,EAAC,MAAM,EAAC,WAAW,EAAC,MAAM,EACjC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,YAAY,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,GAAI,EAE9E,8DACE,IAAI,EAAC,KAAK,EAAE,WAAW,EAAC,OAAO,EAC/B,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,aAAa,GAAI,CAAC,CAAC,MAA2B,CAAC,KAAK,GACvE,EAEF,+DAAQ,OAAO,EAAE,MAAM,IAAI,CAAC,aAAa,EAAE,eAAmB,EAE7D,IAAI,CAAC,UAAU,IAAI,0DAAG,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,IAAG,IAAI,CAAC,UAAU,CAAK,EACpE,IAAI,CAAC,oBAAoB,IAAI,0DAAG,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,IAAG,IAAI,CAAC,oBAAoB,CAAK,CACrF,CACP,EAEA,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,YAAY,KACxC,8DACE,oFAA6B,EAC5B,IAAI,CAAC,sBAAsB,EAAE,CAAC,MAAM,GAAG,CAAC,IACvC,cACG,IAAI,CAAC,sBAAsB,EAAE,CAAC,GAAG,CAAC,IAAI,KACrC,cACG,IAAI,CAAC,SAAS,SAAK,IAAI,CAAC,OAAO,CAC7B,CACN,CAAC,CACC,KAEL,4DAAmD,CACpD,CACG,CACP,CACG,EACN;KACH;;;;;;","names":[],"sources":["src/components/app-booking/app-booking.css?tag=app-booking&encapsulation=shadow","src/components/app-booking/app-booking.tsx"],"sourcesContent":[":host {\r\n    display: block;\r\n    background-color: white;\r\n    padding: 30px;\r\n    border-radius: 10px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  h2 {\r\n    text-align: center;\r\n    color: #333;\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  select, input {\r\n    width: 100%;\r\n    padding: 10px;\r\n    margin-bottom: 15px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  button {\r\n    width: 100%;\r\n    padding: 12px;\r\n    background-color: #28a745;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s ease;\r\n  }\r\n  \r\n  button:hover {\r\n    background-color: #218838;\r\n  }\r\n  \r\n  p {\r\n    color: red;\r\n    text-align: center;\r\n    margin-top: 10px;\r\n  }\r\n\r\n  ul {\r\n    list-style-type: none;\r\n    padding: 0;\r\n    margin-top: 10px;\r\n  }\r\n  \r\n  ul li {\r\n    background-color: #f8d7da;\r\n    color: #721c24;\r\n    padding: 8px;\r\n    margin-bottom: 5px;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  h3 {\r\n    margin-top: 20px;\r\n    color: #333;\r\n  }","import { Component, h, State, Prop, Event, EventEmitter } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'app-booking',\r\n  styleUrl: 'app-booking.css',\r\n  shadow: true\r\n})\r\nexport class AppBooking {\r\n  @Prop() sports: any[] = [];\r\n  @Prop() venues: any[] = [];\r\n  @Prop() bookings: any[] = [];\r\n\r\n  @Event() newBooking: EventEmitter;\r\n\r\n  @State() selectedSportId: number = null;\r\n  @State() selectedVenueId: number = null;\r\n  @State() selectedDate: string = '';\r\n  @State() startTime: string = '';\r\n  @State() endTime: string = '';\r\n  @State() customerName: string = '';\r\n  @State() customerPhone: string = '';\r\n  @State() bookingConflictError: string = '';\r\n  @State() phoneError: string = '';\r\n\r\n  validatePhoneNumber(phone: string): boolean {\r\n    const phoneRegex = /^(\\+91)?[6-9]\\d{9}$/;\r\n    return phoneRegex.test(phone.replace(/\\s+/g, ''));\r\n\r\n  }\r\n  isTimeSlotAvailable(): boolean {\r\n    return !this.bookings.some(booking =>\r\n      booking.venueId === this.selectedVenueId &&\r\n      booking.date === this.selectedDate &&\r\n      ((this.startTime >= booking.startTime && this.startTime < booking.endTime) ||\r\n        (this.endTime > booking.startTime && this.endTime <= booking.endTime))\r\n    );\r\n  }\r\n\r\n  calculateTotalPrice(): number {\r\n    const venue = this.venues.find(v => v.id === this.selectedVenueId);\r\n    if (!venue) return 0;\r\n    const start = new Date(`1970-01-01T${this.startTime}`);\r\n    const end = new Date(`1970-01-01T${this.endTime}`);\r\n    let hours = (end.getTime() - start.getTime()) / (1000 * 60 * 60);\r\n    const extra=hours%1\r\n    if(extra>=0.01 && extra<=0.50){\r\n        hours= Math.floor(hours)+0.5\r\n    }else{\r\n        hours=Math.ceil(hours)\r\n    }\r\n    return venue.pricePerHour * hours;\r\n\r\n  }\r\n\r\n\r\n  handleBooking() {\r\n    this.phoneError = '';\r\n    this.bookingConflictError = '';\r\n\r\n    if (!this.validatePhoneNumber(this.customerPhone)) {\r\n      this.phoneError = 'Please enter a valid 10-digit Indian mobile number';\r\n      return;\r\n    }\r\n    const startHour = parseInt(this.startTime.split(':')[0], 10);\r\n    const endHour = parseInt(this.endTime.split(':')[0], 10);\r\n\r\n    if (startHour < 6 || endHour < 6) {\r\n    this.bookingConflictError = 'Booking is not allowed between 12:00 AM and 6:00 AM';\r\n    return;\r\n    }\r\n\r\n    if (this.isTimeSlotAvailable()) {\r\n      const newBooking = {\r\n        id: Date.now(),\r\n        venueId: this.selectedVenueId,\r\n        date: this.selectedDate,\r\n        startTime: this.startTime,\r\n        endTime: this.endTime,\r\n        customerName: this.customerName,\r\n        customerPhone: this.customerPhone,\r\n        totalPrice: this.calculateTotalPrice(),\r\n        status: 'active'\r\n      };\r\n  \r\n      alert(`Booking Successful!\r\n      \r\n  Venue: ${this.venues.find(v => v.id === this.selectedVenueId)?.name}\r\n  Date: ${this.selectedDate}\r\n  Time: ${this.startTime} - ${this.endTime}\r\n  Total Price: Rs.${newBooking.totalPrice}`);\r\n  \r\n      this.newBooking.emit(newBooking);\r\n  \r\n      this.selectedSportId = null;\r\n      this.selectedVenueId = null;\r\n      this.selectedDate = '';\r\n      this.startTime = '';\r\n      this.endTime = '';\r\n      this.customerName = '';\r\n      this.customerPhone = '';\r\n      this.phoneError = '';\r\n      this.bookingConflictError = '';\r\n    } else {\r\n      this.bookingConflictError = 'This time slot is already booked';\r\n    }\r\n  }\r\n\r\n  \r\n  getBookedSlotsForVenue() {\r\n    return this.bookings\r\n      .filter(booking => \r\n        booking.venueId === this.selectedVenueId && \r\n        booking.status === 'active' &&\r\n        booking.date === this.selectedDate\r\n      )\r\n      .map(booking => ({\r\n        startTime: booking.startTime,\r\n        endTime: booking.endTime\r\n      }));\r\n  }\r\n\r\n  render() {\r\n    const filteredVenues = this.venues.filter(venue => \r\n  venue.sportId === this.selectedSportId && venue.available\r\n);\r\nconst today = new Date().toISOString().split('T')[0];\r\n\r\n    return (\r\n      <div>\r\n        <h2>Book a Venue</h2>\r\n        \r\n        <select onChange={e => this.selectedSportId = parseInt((e.target as HTMLSelectElement).value)}>\r\n          <option value=\"\">-- Select Sport --</option>\r\n          {this.sports.map(sport => <option value={sport.id}>{sport.name}</option>)}\r\n        </select>\r\n\r\n        {this.selectedSportId && (\r\n          <select onChange={e => this.selectedVenueId = parseInt((e.target as HTMLSelectElement).value)}>\r\n            <option value=\"\">-- Select Venue --</option>\r\n            {filteredVenues.map(venue => <option value={venue.id}>{venue.name}</option>)}\r\n          </select>\r\n        )}\r\n\r\n        {this.selectedVenueId && (\r\n          <div>\r\n            <input type=\"date\" \r\n                onInput={e => this.selectedDate = (e.target as HTMLInputElement).value} min={today}/>\r\n\r\n            <input type=\"time\" \r\n                onInput={e => this.startTime = (e.target as HTMLInputElement).value} />\r\n\r\n            <input type=\"time\" \r\n                onInput={e => this.endTime = (e.target as HTMLInputElement).value} />\r\n\r\n            <input type=\"text\" placeholder=\"Name\" \r\n                onInput={e => this.customerName = (e.target as HTMLInputElement).value} />\r\n            \r\n            <input \r\n              type=\"tel\"  placeholder=\"Phone\" \r\n              onInput={e => this.customerPhone = (e.target as HTMLInputElement).value} \r\n            />\r\n            \r\n            <button onClick={() => this.handleBooking()}>Book Now</button>\r\n\r\n            {this.phoneError && <p style={{ color: 'red' }}>{this.phoneError}</p>}\r\n            {this.bookingConflictError && <p style={{ color: 'red' }}>{this.bookingConflictError}</p>}\r\n          </div>\r\n        )}\r\n\r\n        {this.selectedVenueId && this.selectedDate && (\r\n          <div>\r\n            <h3>Already Booked Slots</h3>\r\n            {this.getBookedSlotsForVenue().length > 0 ? (\r\n              <ul>\r\n                {this.getBookedSlotsForVenue().map(slot => (\r\n                  <li>\r\n                    {slot.startTime} - {slot.endTime}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            ) : (\r\n              <p>No slots booked for this venue on this date.</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"version":3}